<!DOCTYPE html>
<html>
<head>
    <title>Teleprompter Display (iPad)</title>
    <script src="https://unpkg.com/peerjs@1.5.2/dist/peerjs.min.js"></script>
    <style>
        body { background: black; color: white; font-family: sans-serif; overflow: hidden; margin: 0; }
        #scroll-container { height: 100vh; overflow-y: scroll; padding: 20px; white-space: pre-wrap; }
        .mirrored { transform: scaleX(-1); }
        #room-id { position: fixed; top: 10px; right: 10px; background: #333; padding: 10px; border-radius: 5px; font-size: 14px; }
    </style>
</head>
<body>
    <div id="room-id">Loading ID...</div>
    <div id="scroll-container">Paste your text on the iPhone to start...</div>

    <script>
        const container = document.getElementById('scroll-container');
        const peer = new Peer(); // Generates a random ID
        let scrollInterval;

        peer.on('open', id => document.getElementById('room-id').innerText = "ID: " + id);

        peer.on('connection', conn => {
            conn.on('data', data => {
                if (data.text) container.innerText = data.text;
                if (data.fontSize) container.style.fontSize = data.fontSize + 'px';
                if (data.mirror !== undefined) container.classList.toggle('mirrored', data.mirror);
                
                // Handle Scrolling
                clearInterval(scrollInterval);
                if (data.speed > 0) {
                    scrollInterval = setInterval(() => {
                        container.scrollTop += 1;
                    }, 100 / data.speed);
                }
            });
        });
    </script>
</body>
</html>
